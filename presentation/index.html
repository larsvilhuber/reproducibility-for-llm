<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.39">

  <meta name="author" content="Lars Vilhuber">
  <meta name="dcterms.date" content="2024-12-14">
  <title>Reproducibility in an AI World</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto-e0361353cdeafe49287cbc150b165de1.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Reproducibility in an AI World</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Lars Vilhuber 
</div>
</div>
</div>

  <p class="date">2024-12-14</p>
</section>
<section class="slide level2 center">

<p><em>A PDF version of this presentation is available <a href="presentation.pdf">here</a>.</em></p>
</section>
<section>
<section id="introduction" class="title-slide slide level1 center">
<h1>Introduction</h1>
<p>AI introduces <strong>challenges for reproducibility</strong>.</p>
</section>
<section class="slide level2 center">

<p>Not unlike <strong>difficulties</strong> researchers face with</p>
<ul>
<li>any black-box systems</li>
<li>existing commercial software</li>
<li>external APIs of any kind</li>
</ul>
</section>
<section class="slide level2 center">

<p>I will discuss</p>
<ul>
<li>algorithmic transparency</li>
<li>data dependencies</li>
<li>archiving machine learning models</li>
</ul>
</section>
<section id="computational-reproducibility" class="slide level2 center">
<h2>Computational reproducibility</h2>
<p>In this talk, we focus on <strong>computational reproducibility</strong>, though the ultimate goal remains <em>replicability</em>.</p>
</section>
<section id="llm-vs.-ai" class="slide level2 center">
<h2>LLM vs.&nbsp;AI</h2>
<p>I will distinguish <strong>LLM</strong> (large language models) from <strong>AI</strong> (artificial intelligence):</p>
<ul>
<li>LLM: models that are trained for a specific (possibly broad) purpose</li>
<li>AI: <strong>online</strong> systems that use LLMs, such as GPT, Claude, etc.</li>
</ul>
</section>
<section id="my-background" class="slide level2 center">
<h2>My background</h2>
<ul>
<li>Data Editor for journals of the American Economic Association</li>
<li>1700+ reproducibility packages</li>
<li>but: ⚠️ almost none with LLM or AI!</li>
</ul>
</section>
<section id="reproducibility-may-be-hard-but-important" class="slide level2 center">
<h2>Reproducibility may be hard but important</h2>

<img data-src="images/star-trek-beam.gif" class="r-stretch"></section></section>
<section>
<section id="what-does-claude-say-edited" class="title-slide slide level1 center">
<h1>What does Claude say (edited)?</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>&gt; What should a presentation on the reproducibility of AI-based research address?</code></pre>
</div>
</div>
</section>
<section id="response" class="slide level2 center">
<h2>Response</h2>
<p><img data-src="images/claude-prompt1-20241214.png" alt="Claude’s response">[^claude1]</p>
<p>See <a href="index.html#/what-did-claude-say">full response</a> as well as <a href="index.html#/what-did-openai-say">OpenAI’s response</a> [^claude1]: claude.ai, Haiku, Normal, 2024-12-14 20:47</p>
</section>
<section id="response-edited" class="slide level2 smaller center">
<h2>Response (edited)</h2>
<pre><code>A presentation on the reproducibility of AI-based research should comprehensively address several critical aspects:

1. Methodology Transparency
2. Computational Environment
3. Data Considerations
4. Experimental Reproducibility
5. Code and Implementation
6. Ethical and Contextual Considerations
7. Validation Strategies
8. Reporting Challenges

By comprehensively addressing these areas, the presentation can provide a robust framework for understanding and potentially replicating AI-based research, ultimately contributing to the scientific integrity and advancement of the field.</code></pre>
</section>
<section id="comparison" class="slide level2 smaller center scrollable">
<h2>Comparison</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Claude:</p>
<ol type="1">
<li>Methodology Transparency</li>
<li>Computational Environment</li>
<li>Data Considerations</li>
<li>Experimental Reproducibility</li>
<li>Code and Implementation</li>
<li>Ethical and Contextual Considerations</li>
<li>Validation Strategies</li>
<li>Reporting Challenges</li>
</ol>
</div><div class="column" style="width:50%;">
<p>OpenAI:</p>
<ol type="1">
<li>Introduction to Reproducibility</li>
<li>Challenges in Reproducibility</li>
<li>Data Accessibility</li>
<li>Algorithm and Model Transparency</li>
<li>Documentation and Reporting Standards</li>
<li>Tools and Platforms for Reproducibility</li>
<li>Case Studies and Examples</li>
<li>Community and Collaboration</li>
<li>Ethical and Legal Considerations</li>
<li>Future Directions and Recommendations</li>
</ol>
</div></div>
</section></section>
<section>
<section id="targets" class="title-slide slide level1 smaller center">
<h1>Targets</h1>
<p>We want to check that</p>
<div>
<ul class="task-list">
<li class="fragment"><label><input type="checkbox">the materials can be accessed by others within a reasonable timeframe</label></li>
<li class="fragment"><label><input type="checkbox">whether the materials can be preserved is made clear</label></li>
<li class="fragment"><label><input type="checkbox">the extent to which re-running the same code yields the same results</label></li>
</ul>
</div>
</section>
<section id="tools-and-standards" class="slide level2 center">
<h2>Tools and Standards</h2>
<p>In Economics,</p>
<ul>
<li>Use the <a href="https://social-science-data-editors.github.io/template_README/">Template README</a> (<a href="https://larsvilhuber.github.io/readme-presentation/">presentation</a>)</li>
<li>Describe data provenance and access conditions for all <strong>raw data</strong></li>
<li>Describe all data transformations starting with <strong>raw data</strong></li>
<li>Provide <strong>all code</strong>, including for data you cannot share</li>
</ul>
</section>
<section id="but-first" class="slide level2 center">
<h2>But first…</h2>
</section></section>
<section>
<section id="lets-talk-about-data" class="title-slide slide level1 center">
<h1>Let’s talk about data</h1>

</section>
<section id="types-of-data" class="slide level2 center">
<h2>Types of Data</h2>
<ul>
<li>Data used for training</li>
<li>Data used for analysis</li>
<li>Data output by the algorithm</li>
</ul>
</section>
<section id="questions-for-data" class="slide level2 smaller center" data-auto-animate="true" data-transition="fade">
<h2 data-id="quarto-animate-title">Questions for Data</h2>
<div>
<ul>
<li class="fragment">Where did the (training/analysis) data come from?
<ul>
<li class="fragment">Can you share it?</li>
<li class="fragment">Can others obtain access?</li>
<li class="fragment">Is it still there?</li>
</ul></li>
<li class="fragment">Where did you put the analysis data?
<ul>
<li class="fragment">Can you share it?</li>
<li class="fragment">If not, why not?</li>
<li class="fragment">Can you preserve it?</li>
</ul></li>
</ul>
</div>
</section>
<section id="guidance-in-readme" class="slide level2 center">
<h2>Guidance in README</h2>
<p><a href="https://social-science-data-editors.github.io/template_README/template-README.html#data-availability-and-provenance-statements"><img data-src="images/readme-dcas.png"></a></p>
</section>
<section id="data-provenance" class="slide level2 center">
<h2>Data Provenance</h2>
<blockquote>
<p>Are <strong>models</strong> data or software? - will treat as <strong>software</strong> here.</p>
</blockquote>
</section>
<section id="data-provenance-1" class="slide level2 center">
<h2>Data Provenance</h2>
<ul>
<li>Are the source data <strong>preserved</strong>?
<ul>
<li>Often large <strong>text</strong> archives</li>
<li>Format relevant: physical or electronic copy?</li>
</ul></li>
</ul>
</section>
<section id="good-example" class="slide level2 smaller center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Good example</h2>
<p>“Immigration Restrictions as Active Labor Market Policy: Evidence from the Mexican Bracero Exclusion, Replication files and raw data” (Michael Clemens)</p>
<ul>
<li>Hosted on <strong>Harvard Dataverse</strong> at <a href="https://dataverse.harvard.edu/dataverse/bracero" class="uri">https://dataverse.harvard.edu/dataverse/bracero</a></li>
<li>Contains two datasets:
<ul>
<li>Clemens, Michael, 2017, “<strong>Raw scanned PDFs of primary sources for workers, wages, and crops</strong>”, <a href="https://doi.org/10.7910/DVN/DJHVHB" class="uri">https://doi.org/10.7910/DVN/DJHVHB</a>, Harvard Dataverse, V1</li>
</ul></li>
</ul>
</section>
<section id="your-analysis-data" class="slide level2 center">
<h2>Your analysis data</h2>
<p>Probably requires</p>
<ul>
<li>substantial computing resources (time, cost, space)</li>
<li>lesser storage resources</li>
</ul>
</section>
<section id="good-example-1" class="slide level2 smaller center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Good example</h2>
<blockquote>
<p>“Immigration Restrictions as Active Labor Market Policy: Evidence from the Mexican Bracero Exclusion, Replication files and raw data” (Michael Clemens)</p>
</blockquote>
<ul>
<li>Hosted on <strong>Harvard Dataverse</strong> at <a href="https://dataverse.harvard.edu/dataverse/bracero" class="uri">https://dataverse.harvard.edu/dataverse/bracero</a></li>
<li>Contains two datasets:
<ul>
<li>Clemens, Michael, 2018, “Replication Data for: Immigration Restrictions as Active Labor Market Policy: Evidence from the Mexican Bracero Exclusion”, <a href="https://doi.org/10.7910/DVN/17M4ZP" class="uri">https://doi.org/10.7910/DVN/17M4ZP</a>, Harvard Dataverse, V1</li>
</ul></li>
</ul>
</section>
<section id="llm-specific-considerations" class="slide level2 center">
<h2>LLM-specific considerations</h2>
<p>Generically,</p>
<p><code>pre-trained LLM</code> ▶️ <code>tuned LLM</code> ▶️ <code>analysis data</code></p>
</section>
<section id="llm-specific-considerations-1" class="slide level2 center">
<h2>LLM-specific considerations</h2>
<ul>
<li><code>tuned LLM</code> = f(<code>raw data</code>,<code>pre-trained LLM</code>)</li>
<li><code>analysis data</code> = f(<code>tuned LLM</code>,<code>raw data</code>)</li>
</ul>
<p><strong>Both should be preserved</strong></p>
</section>
<section id="llm-specific-considerations-2" class="slide level2 center">
<h2>LLM-specific considerations</h2>
<ul>
<li>size?</li>
<li>where?</li>
</ul>
</section>
<section id="llm-specific-considerations-3" class="slide level2 center">
<h2>LLM-specific considerations</h2>
<p><code>tuned LLM</code>:</p>
<ul>
<li>can you release it? (privacy)</li>
<li>does <strong>Hugging Face</strong> have a preservation policy? (<em>no</em>)</li>
<li>license to apply to it?</li>
</ul>
</section>
<section id="llm-specific-considerations-4" class="slide level2 center">
<h2>LLM-specific considerations</h2>
<p><code>analysis data</code>:</p>
<ul>
<li>can be preserved as part of the replication package</li>
<li>could be preserved elsewhere, if multi-purpose</li>
</ul>
</section></section>
<section>
<section id="run-it-all-again" class="title-slide slide level1 center">
<h1>Run it all again</h1>
<p>The very first test is that your code must run, <strong>beginning to end,</strong> top to bottom, without error, and ideally without any user intervention. This should in principle (re)create all figures, tables, and numbers you include in your paper.</p>
</section>
<section id="tldr" class="slide level2 center">
<h2>TL;DR</h2>
<p>This is pretty much the most basic test of reproducibility.</p>
<blockquote>
<p>This has nothing to do with LLM/AI!</p>
</blockquote>
<p>If you cannot run your code, you cannot reproduce your results, nor can anybody else. So just re-run the code.</p>
</section>
<section id="exceptions" class="slide level2 center">
<h2>Exceptions</h2>
</section>
<section id="code-runs-for-a-very-long-time" class="slide level2 center">
<h2>Code runs for a very long time</h2>
<p>What happens when some of these re-runs are very long? See later in this chapter for how to handle this.</p>
</section>
<section id="making-the-code-run-takes-you-a-very-long-time" class="slide level2 center">
<h2>Making the code run takes YOU a very long time</h2>
<p>While the code, once set to run, can do so on its own, <em>you</em> might need to spend a lot of time getting all the various pieces to run.</p>
</section>
<section class="slide level2 center">

<p><img data-src="images/Red-Warning-PNG-Clipart.png" class="center" width="350" height="300"></p>
<p><em>This should be a warning sign:</em></p>
<p>If it takes you a long time to get it to run, or to manually reproduce the results, it <strong>might take others even longer</strong>.<a href="#/footnotes" class="footnote-ref" id="fnref1" role="doc-noteref" data-footnote-href="#/fn1" onclick=""><sup>1</sup></a></p>
<aside></aside></section>
<section class="slide level2 center">

<p>Furthermore, it may suggest that you <strong>haven’t been able to re-run</strong> your own code very often, which can be indicate <strong>fragility</strong> or even <strong>lack of reproducibility</strong>.</p>
</section>
<section id="takeaways" class="slide level2 smaller center">
<h2>Takeaways</h2>
<div>
<ul class="task-list">
<li class="fragment"><label><input type="checkbox" checked="">your code runs without problem, after all the debugging.</label></li>
<li class="fragment"><label><input type="checkbox">your code runs without manual intervention, and with low effort</label></li>
<li class="fragment"><label><input type="checkbox">it actually produces all the outputs</label></li>
<li class="fragment"><label><input type="checkbox">your code generates a log file that you can inspect, and that you could share with others.</label></li>
<li class="fragment"><label><input type="checkbox">it will run on somebody else’s computer</label></li>
</ul>
</div>
</section></section>
<section>
<section id="why-is-this-not-enough" class="title-slide slide level1 center">
<h1>Why is this not enough?</h1>

</section>
<section id="does-your-code-run-without-manual-intervention" class="slide level2 center">
<h2>Does your code run without manual intervention?</h2>
<p>Automation and robustness checks, as well as efficiency.</p>
</section>
<section id="can-you-provide-evidence-that-you-ran-it" class="slide level2 center">
<h2>Can you provide evidence that you ran it?</h2>
<p>Generating a log file means that you can inspect it, and you can share it with others. Also helps in debugging, for you and others.</p>
</section>
<section id="will-it-run-on-somebody-elses-computer" class="slide level2 smaller center">
<h2>Will it run on somebody else’s computer?</h2>
<p>Running it again does not help:</p>
<div>
<ul>
<li class="fragment">because it does not guarantee that somebody else has all the software (including packages!)</li>
<li class="fragment">because it does not guarantee that all the directories for input or output are there</li>
<li class="fragment">because many intermediate files might be present that are not in the replication package</li>
<li class="fragment">because you might have run things out of sequence, or relied on previously generated files in ways that won’t work for others</li>
<li class="fragment">because some outputs might be present from test runs, but actually fail in this run</li>
</ul>
</div>
</section></section>
<section>
<section id="hands-off-running-creating-a-controller-script" class="title-slide slide level1 center">
<h1>Hands-off running: Creating a controller script</h1>
<ul>
<li><p>Your code must run, <strong>beginning to end</strong>, top to bottom, without error, and <strong>without any user intervention</strong>.</p></li>
<li><p>This should in principle (re)create all <strong>figures</strong>, <strong>tables</strong>, and <strong>in-text numbers</strong> you include in your paper.</p></li>
</ul>
<aside class="notes">
<p>We have seen users who appear to highlight code and to run it interactively, in pieces, using the program file as a kind of notepad. This is not reproducible, and should be avoided. It is fine for debugging.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="seem-trivial" class="slide level2 center">
<h2>Seem trivial?</h2>
<blockquote>
<p>Out of <strong>8280</strong> replication packages in ~20 top econ journals, only <strong>2594</strong> (<strong>31.33%</strong>) had a main/controller script.<a href="#/footnotes" class="footnote-ref" id="fnref2" role="doc-noteref" data-footnote-href="#/fn2" onclick=""><sup>2</sup></a></p>
</blockquote>
<aside></aside></section>
<section id="tldr-1" class="slide level2 center">
<h2>TL;DR</h2>
<ul>
<li>Create a “main” file that runs all the other files in the correct order.</li>
<li>Run this file, without user intervention.</li>
<li>It should run without error.</li>
</ul>
</section>
<section id="creating-a-main-or-master-script" class="slide level2 center">
<h2>Creating a main or master script</h2>
<p>In order to be able to enable “hands-off running”, the <strong>main (controller) script is key</strong>.</p>
</section>
<section id="example-1-querying-claude.ai" class="slide level2 center">
<h2>Example 1: Querying Claude.ai</h2>
<ul>
<li>for the first example, I was <strong>lazy</strong> - I typed the prompt into the Claude.ai website.</li>
<li>Can you repeat it?</li>
<li>What if I have to repeat it 100 times, with slight variations?</li>
</ul>
</section>
<section id="r" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">R</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Set the root directory (using <code>here()</code> or <code>rprojroot()</code>).</p>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb3" data-code-line-numbers="3-4"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb3-1" class="hljs-ln-code"><a href=""></a><span class="co"># main.R</span></span>
<span id="cb3-2" class="hljs-ln-code"><a href=""></a><span class="do">## Set the root directory</span></span>
<span id="cb3-3" class="hljs-ln-code"><a href=""></a><span class="co"># If you are using Rproj files or git</span></span>
<span id="cb3-4" class="hljs-ln-code"><a href=""></a>rootdir <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>()</span>
<span id="cb3-5" class="hljs-ln-code"><a href=""></a><span class="co"># or if not</span></span>
<span id="cb3-6" class="hljs-ln-code"><a href=""></a><span class="co"># rootdir &lt;- getwd()</span></span>
<span id="cb3-7" class="hljs-ln-code"><a href=""></a><span class="do">## Run the data preparation file</span></span>
<span id="cb3-8" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"01_data_prep.R"</span>), </span>
<span id="cb3-9" class="hljs-ln-code"><a href=""></a>       <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-10" class="hljs-ln-code"><a href=""></a><span class="do">## Run the analysis file</span></span>
<span id="cb3-11" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"02_analysis.R"</span>), </span>
<span id="cb3-12" class="hljs-ln-code"><a href=""></a>       <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-13" class="hljs-ln-code"><a href=""></a><span class="do">## Run the table file</span></span>
<span id="cb3-14" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"03_tables.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-15" class="hljs-ln-code"><a href=""></a><span class="do">## Run the figure file</span></span>
<span id="cb3-16" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"04_figures.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-17" class="hljs-ln-code"><a href=""></a><span class="do">## Run the appendix file</span></span>
<span id="cb3-18" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"05_appendix.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="r-1" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">R</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Call each of the component programs, using <code>source()</code>.</p>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb4" data-code-line-numbers="8-9|11-12|14|16|18"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb4-1" class="hljs-ln-code"><a href=""></a><span class="co"># main.R</span></span>
<span id="cb4-2" class="hljs-ln-code"><a href=""></a><span class="do">## Set the root directory</span></span>
<span id="cb4-3" class="hljs-ln-code"><a href=""></a><span class="co"># If you are using Rproj files or git</span></span>
<span id="cb4-4" class="hljs-ln-code"><a href=""></a>rootdir <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>()</span>
<span id="cb4-5" class="hljs-ln-code"><a href=""></a><span class="co"># or if not</span></span>
<span id="cb4-6" class="hljs-ln-code"><a href=""></a><span class="co"># rootdir &lt;- getwd()</span></span>
<span id="cb4-7" class="hljs-ln-code"><a href=""></a><span class="do">## Run the data preparation file</span></span>
<span id="cb4-8" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"01_data_prep.R"</span>), </span>
<span id="cb4-9" class="hljs-ln-code"><a href=""></a>       <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-10" class="hljs-ln-code"><a href=""></a><span class="do">## Run the analysis file</span></span>
<span id="cb4-11" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"02_analysis.R"</span>), </span>
<span id="cb4-12" class="hljs-ln-code"><a href=""></a>       <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-13" class="hljs-ln-code"><a href=""></a><span class="do">## Run the table file</span></span>
<span id="cb4-14" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"03_tables.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-15" class="hljs-ln-code"><a href=""></a><span class="do">## Run the figure file</span></span>
<span id="cb4-16" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"04_figures.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-17" class="hljs-ln-code"><a href=""></a><span class="do">## Run the appendix file</span></span>
<span id="cb4-18" class="hljs-ln-code"><a href=""></a><span class="fu">source</span>(<span class="fu">file.path</span>(rootdir, <span class="st">"05_appendix.R"</span>), <span class="at">echo =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="notes-for-r" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Notes for R</h2>
<p>The use of <code>echo=TRUE</code> is best, as it will show the code that is being run, and is thus more transparent to you and the future replicator.</p>
</section>
<section id="notes-for-python" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Notes for Python</h2>
<ul>
<li>There are many ways to do this in Python (as there are more in R)</li>
<li>Defining <strong>functions</strong> separately, and then calling them in the <strong>main</strong> file.</li>
<li>Constructing a <strong>package</strong> and calling that package.</li>
</ul>
</section>
<section id="notes-for-python-1" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Notes for Python</h2>
<p>If using <strong>procedural</strong> Python code, might use a <code>bash</code> script:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb5-1" class="hljs-ln-code"><a href=""></a><span class="co"># This is main.sh</span></span>
<span id="cb5-2" class="hljs-ln-code"><a href=""></a><span class="ex">python</span> 01_data_prep.py</span>
<span id="cb5-3" class="hljs-ln-code"><a href=""></a><span class="ex">python</span> 02_analysis.py</span>
<span id="cb5-4" class="hljs-ln-code"><a href=""></a><span class="ex">python</span> 03_tables.py</span>
<span id="cb5-5" class="hljs-ln-code"><a href=""></a><span class="ex">python</span> 04_figures.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="caution" class="slide level2 center">
<h2>Caution</h2>
<p>What you do should remain <strong>transparent</strong> to other users!</p>
</section>
<section id="caution-1" class="slide level2 center">
<h2>Caution</h2>
<p>Writing a scientific paper is different than writing a useful function on the internet.</p>
<blockquote>
<p>You are not writing <code>mynumpy</code>, you are writing a paper.</p>
</blockquote>
<p><em>… though there are grey areas there.</em></p>
</section>
<section id="takeaways-1" class="slide level2 smaller center">
<h2>Takeaways</h2>
<ul class="task-list">
<li><label><input type="checkbox" checked="">your code runs without problem, after all the debugging.</label></li>
<li><label><input type="checkbox" checked="">your code runs without manual intervention, and with low effort</label></li>
<li><label><input type="checkbox">it actually produces all the outputs</label></li>
<li><label><input type="checkbox">your code generates a log file that you can inspect, and that you could share with others.</label></li>
<li><label><input type="checkbox">it will run on somebody else’s computer</label></li>
</ul>
</section></section>
<section>
<section id="an-example" class="title-slide slide level1 center">
<h1>An example</h1>

</section>
<section id="korinek-2023" class="slide level2 center">
<h2>Korinek (2023)</h2>
</section>
<section id="existing-replication-package" class="slide level2 center">
<h2>Existing Replication Package</h2>
<ul>
<li>Article <span class="citation" data-cites="korinekGenerativeAIEconomic2023">(<a href="#/references" role="doc-biblioref" onclick="">Korinek 2023b</a>)</span> (also NBER WP <span class="citation" data-cites="korinekGenerativeAIEconomic2024">(<a href="#/references" role="doc-biblioref" onclick="">Korinek 2024</a>)</span>)</li>
<li>Package at <span class="citation" data-cites="korinekDataCodeGenerative2023">(<a href="#/references" role="doc-biblioref" onclick="">Korinek 2023a</a>)</span></li>
<li>Additional materials at <a href="https://www.genaiforecon.org/index.html" class="uri">https://www.genaiforecon.org/index.html</a></li>
<li>I vetted this package!</li>
</ul>
</section>
<section id="created-in-2023" class="slide level2 center">
<h2>Created in 2023</h2>
<ul>
<li>Python based</li>
<li>README states</li>
</ul>
<pre><code>Ensure you have the necessary Python libraries installed:

  pip install openai pandas numpy
​

To execute the simplest example, run the script:

 python simple_example_chat1.py
​
​
The results will be displayed on the screen.</code></pre>
</section>
<section id="ex-post-critique" class="slide level2 center">
<h2>Ex-post critique</h2>
<ul>
<li>Missing a <code>requirements.txt</code></li>
<li>No instructions to set an environment</li>
</ul>
<blockquote>
<p>These are now systematically requested for replication packages!</p>
</blockquote>
</section>
<section id="trying-it-out" class="slide level2 center">
<h2>Trying it out</h2>
<p>I created a <code>requirements.txt</code> file</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href=""></a><span class="va">numpy</span><span class="op">=</span>=2.2.0</span>
<span id="cb7-2"><a href=""></a><span class="va">openai</span><span class="op">=</span>=1.57.4</span>
<span id="cb7-3"><a href=""></a><span class="va">pandas</span><span class="op">=</span>=2.2.3</span>
<span id="cb7-4"><a href=""></a><span class="ex">openpyxl</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>(note: created using <a href="https://pypi.org/project/pipreqs/"><code>pipreqs</code></a> Python package, plus hand-edit).</em></p>
</section>
<section id="trying-it-out-2" class="slide level2 center">
<h2>Trying it out (2)</h2>
<p>Create environment</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href=""></a><span class="ex">python3.11</span> <span class="at">-m</span> venv venv-311</span>
<span id="cb8-2"><a href=""></a><span class="bu">source</span> venv-311/bin/activate</span>
<span id="cb8-3"><a href=""></a><span class="ex">pip</span> install <span class="at">-r</span> requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>(note: running on Linux, openSUSE, Python 3.11.10)</em></p>
</section>
<section id="trying-it-out-3" class="slide level2 center">
<h2>Trying it out (3)</h2>
<p>Get the API key</p>
<ul>
<li>Go to <a href="https://platform.OpenAI.com" class="uri">https://platform.OpenAI.com</a></li>
<li>Go to <code>API keys</code> on the left side</li>
<li>Verify phone number (a challenge while roaming!)</li>
<li><code>+ Create new secret key</code></li>
<li>Save the API key in file <code>.env</code></li>
</ul>
</section>
<section id="trying-it-out-4" class="slide level2 center">
<h2>Trying it out (4)</h2>
<p>Run the script</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href=""></a><span class="ex">python</span> simple_example_chat1.py </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="failure" class="slide level2 center">
<h2>Failure!</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href=""></a><span class="op">&gt;</span> python <span class="ex">simple_example_chat1.py</span> </span>
<span id="cb10-2"><a href=""></a><span class="ex">Please</span> enter your OpenAI API key: </span>
<span id="cb10-3"><a href=""></a>  <span class="ex">File</span> <span class="st">"/path/korinek-2023/simple_example_chat1.py"</span>, line 24, in <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb10-4"><a href=""></a>    <span class="ex">openai.api_key</span> = input<span class="er">(</span><span class="st">"Please enter your OpenAI API key: "</span><span class="kw">)</span></span>
<span id="cb10-5"><a href=""></a>                     <span class="ex">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></span>
<span id="cb10-6"><a href=""></a><span class="ex">KeyboardInterrupt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="attempt-to-fix" class="slide level2 center">
<h2>Attempt to fix</h2>
<ul>
<li>README speaks of environment variable</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href=""></a><span class="bu">export</span> <span class="va">OPENAI_API_KEY</span><span class="op">=</span>sk-proj-lxxxxxxxxxx</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Run again, same error!</li>
</ul>
</section>
<section id="reasons" class="slide level2 center">
<h2>Reasons</h2>
<ul>
<li>Not scripted enough, requires manual intervention!</li>
<li>Ignores <code>.env</code> file (one way of doing it)</li>
<li>Ignores environment variable (another way), despite doing it in another script!</li>
</ul>
</section>
<section id="quick-fix" class="slide level2 center">
<h2>Quick fix</h2>
<ul>
<li>I fixed the script to read from environment variable.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href=""></a>openai.api_key <span class="op">=</span> os.environ.get(<span class="st">'OPENAI_API_KEY'</span>)</span>
<span id="cb12-2"><a href=""></a></span>
<span id="cb12-3"><a href=""></a><span class="co"># If the API key isn't found in the environment variable, prompt the user for it</span></span>
<span id="cb12-4"><a href=""></a><span class="cf">if</span> <span class="kw">not</span> openai.api_key:</span>
<span id="cb12-5"><a href=""></a>    openai.api_key <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Please enter your OpenAI API key: "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote>
<p>NEVER RECORD YOUR API KEY IN SCRIPTS!</p>
</blockquote>
</section>
<section id="important" class="slide level2 center">
<h2>IMPORTANT</h2>
<ul>
<li>These are <strong>standard Python</strong> issues, <em>not AI issues</em>!</li>
<li>But they are crucial for reproducibility!</li>
</ul>
</section>
<section id="result" class="slide level2 smaller center">
<h2>Result</h2>
<div class="sourceCode" id="cb13" data-fold="true" data-code-line-numbers="9,13"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href=""></a><span class="ex">Traceback</span> <span class="er">(</span><span class="ex">most</span> recent call last<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb13-2"><a href=""></a>  <span class="ex">File</span> <span class="st">"/path/korinek-2023/simple_example_chat1.py"</span>, line 37, in <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb13-3"><a href=""></a>    <span class="ex">completion</span> = openai.ChatCompletion.create<span class="er">(</span></span>
<span id="cb13-4"><a href=""></a>                 <span class="ex">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></span>
<span id="cb13-5"><a href=""></a>  <span class="ex">File</span> <span class="st">"/path/korinek-2023/venv-311/lib64/python3.11/site-packages/openai/lib/_old_api.py"</span>, line 39, in __call__</span>
<span id="cb13-6"><a href=""></a>    <span class="ex">raise</span> APIRemovedInV1<span class="er">(</span><span class="va">symbol</span><span class="op">=</span>self._symbol<span class="kw">)</span></span>
<span id="cb13-7"><a href=""></a><span class="ex">openai.lib._old_api.APIRemovedInV1:</span> </span>
<span id="cb13-8"><a href=""></a></span>
<span id="cb13-9"><a href=""></a><span class="ex">You</span> tried to access openai.ChatCompletion, but this is no longer supported in openai<span class="op">&gt;</span>=1.0.0 <span class="at">-</span> see the README at https://github.com/openai/openai-python for the API.</span>
<span id="cb13-10"><a href=""></a></span>
<span id="cb13-11"><a href=""></a><span class="ex">You</span> can run <span class="kw">`</span><span class="ex">openai</span> migrate<span class="kw">`</span> to automatically upgrade your codebase to use the 1.0.0 interface. </span>
<span id="cb13-12"><a href=""></a></span>
<span id="cb13-13"><a href=""></a><span class="ex">Alternatively,</span> you can pin your installation to the old version, e.g. <span class="kw">`</span><span class="ex">pip</span> install openai==0.28<span class="kw">`</span></span>
<span id="cb13-14"><a href=""></a></span>
<span id="cb13-15"><a href=""></a><span class="ex">A</span> detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="this-is-a-standard-python---api-issue" class="slide level2 smaller center">
<h2>THIS IS A STANDARD PYTHON - API ISSUE!</h2>
<ul>
<li>These are <strong>standard API</strong> issues, <em>not AI issues</em>!</li>
<li>APIs change</li>
<li>Libraries change</li>
<li>Having <strong>latest</strong> is not always best.</li>
<li>But they are crucial for reproducibility!</li>
</ul>
<blockquote>
<p>Provide <code>requirements.txt</code> and pin versions!</p>
</blockquote>
<p><em>(We will talk later about API issues!)</em></p>
</section>
<section id="next-attempt" class="slide level2 smaller center">
<h2>Next attempt</h2>
<ul>
<li>Fix <code>requirements.txt</code>, re-install</li>
</ul>
<div class="sourceCode" id="cb14" data-fold="true" data-code-line-numbers="9"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href=""></a><span class="op">&gt;</span> python <span class="ex">simple_example_chat1.py</span> </span>
<span id="cb14-2"><a href=""></a><span class="ex">Traceback</span> <span class="er">(</span><span class="ex">most</span> recent call last<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb14-3"><a href=""></a>  <span class="ex">File</span> <span class="st">"/path/korinek-2023/simple_example_chat1.py"</span>, line 37, in <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb14-4"><a href=""></a>    <span class="ex">completion</span> = openai.ChatCompletion.create<span class="er">(</span></span>
<span id="cb14-5"><a href=""></a>                 <span class="ex">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></span>
<span id="cb14-6"><a href=""></a><span class="op">&lt;</span>snip<span class="op">&gt;</span></span>
<span id="cb14-7"><a href=""></a>  <span class="ex">File</span> <span class="st">"/path/korinek-2023/venv-311/lib64/python3.11/site-packages/openai/api_requestor.py"</span>, line 765, in _interpret_response_line</span>
<span id="cb14-8"><a href=""></a>    <span class="ex">raise</span> self.handle_error_response<span class="er">(</span></span>
<span id="cb14-9"><a href=""></a><span class="ex">openai.error.InvalidRequestError:</span> The model <span class="kw">`</span><span class="ex">gpt-4-0613</span><span class="kw">`</span> does not exist or you do not have access to it.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="fixing-this" class="slide level2 smaller center">
<h2>Fixing this</h2>

<img data-src="images/copilot-screenshot-20241214.png" class="r-stretch quarto-figure-center"><p class="caption">CoPilot response</p><p><em>(note: <code>github.copilot-chat</code> 0.23.1, updated 2024-12-14, 15:31:36)</em></p>
</section>
<section id="turns-out" class="slide level2 center">
<h2>Turns out…</h2>
<ul>
<li>I thought I had credits, I did not.</li>
<li>It was the <code>you do not have access to it</code> part that was crucial!</li>
</ul>
</section>
<section id="results" class="slide level2 smaller center">
<h2>Results</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Original content</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>1. Job loss due to automation in lower-skille
2. AI-driven wealth concentration in tech-sav
3. Digital literacy gap leading to economic d
4. Lack of universal access to AI technology.
5. AI-driven bias in hiring and selection pro
6. Imbalance in job market due to AI speciali
7. Data privacy issues affecting vulnerable p
8. AI-driven services predominantly targeting
9. Algorithms exacerbating social inequality 
10. Inclusive AI product development lacking.
11. Higher prices due to AI-enhanced products
12. AI-fueled gentrification in tech-centered
13. Anticompetitive practices bolstered by AI
14. Lack of labor rights for jobs displaced b
15. Educational imbalance due to AI-learning 
16. AI in healthcare excluding lower socioeco
17. Disproportionate influence of AI in polit
18. Undervaluing of human skills in favor of 
19. Biased AI systems perpetuating discrimina
20. AI reinforcing societal hierarchies via d</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>Content as of 2024-12-14:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>1. Job displacement due to automation.
2. Wealth concentration in tech industries.
3. Increased surveillance disproportionately 
4. Unequal access to AI technology.
5. AI-driven discrimination in hiring.
6. AI bias in credit scoring.
7. Inequality in AI education and training.
8. AI in healthcare favoring wealthier patien
9. AI-driven gentrification in cities.
10. AI in law enforcement targeting minoritie
11. AI in marketing exploiting vulnerable con
12. AI in politics manipulating voters.
13. AI in insurance favoring privileged group
14. AI in social media amplifying hate speech
15. AI in education favoring affluent student
16. AI in agriculture favoring large-scale fa
17. AI in transportation favoring urban areas
18. AI in retail favoring wealthier consumers
19. AI in entertainment creating cultural div
20. AI in research favoring developed countri</code></pre>
</div>
</div>
</div></div>
</section></section>
<section>
<section id="next" class="title-slide slide level1 center">
<h1>Next…</h1>

</section>
<section class="slide level2 center">

<p><em>One of the most frequently asked questions…</em></p>
</section>
<section class="slide level2 center">

<p><em>“but I have confidential data…”</em></p>
</section>
<section class="slide level2 center">

<p><strong>Equivalently</strong></p>
</section>
<section class="slide level2 center">

<p><em>“but I have a big LLM model…”</em></p>
</section>
<section class="slide level2 center">

</section></section>
<section>
<section id="so-what-happens-when" class="title-slide slide level1 center">
<h1>So what happens when…</h1>

</section>
<section id="you-cannot-share-a-file" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">You cannot share a file</h2>
</section>
<section id="the-file-no-longer-exists-on-the-internet" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">The file no longer exists on the internet</h2>
</section>
<section id="the-code-takes-ages-to-run" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">The code takes ages to run</h2>
</section>
<section class="slide level2 center">

<p>How can you show that you actually ran the code?</p>
</section>
<section class="slide level2 center">

</section></section>
<section>
<section id="creating-log-files" class="title-slide slide level1 center">
<h1>Creating log files</h1>
<p>In order to document that you have actually run your code, a <strong>log file</strong>, a transcript, or some other evidence, may be useful. It may even be required by certain journals.</p>
</section>
<section id="tldr-2" class="slide level2 center">
<h2>TL;DR</h2>
<ul>
<li><strong>Log files</strong> are a way to document that you have run your code.</li>
<li>In particular for code that runs for a very long time, or that uses data that cannot be shared, log files may be the only way to document basic reproducibility.</li>
</ul>
</section>
<section id="overview" class="slide level2 center">
<h2>Overview</h2>
<div>
<ul>
<li class="fragment">Most statistical software has ways to keep a record that it has run, with the details of that run.</li>
<li class="fragment">Some make it easier than others.</li>
<li class="fragment">You may need to instruct your code to be “verbose”, or to “log” certain events.</li>
<li class="fragment">You may need to use a command-line option to the software to create a log file.</li>
</ul>
</div>
<aside class="notes">
<p>I do note that we are typically only looking to document what the statistical code does, at a high level. We are not looking to document system calls, fine-grained data access, etc. Computer scientists and IT security mavens may be interested in such details, but economists are typically not.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2 center">

<p>In almost all cased, the generated log files are simple text files, without any formatting, and can be read by any text editor (e.g., Visual Studio Code, Notepad++, etc.).</p>
<p>If not, ensure that they are (avoid <em>Stata SMCL</em> files, for example, or <em>iPython</em> output).</p>
</section>
<section id="creating-log-files-explicitly" class="slide level2 center">
<h2>Creating log files explicitly</h2>
<p>Generically: see <a href="https://larsvilhuber.github.io/self-checking-reproducibility/presentation/#/creating-log-files"><em>separate</em> tutorial</a>.</p>
</section>
<section id="python" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Python</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p>Create a wrapper that will capture the calls for any function</p>
</div><div class="column" style="width:70%;">
<div class="sourceCode" id="cb17" data-code-line-numbers="2-9"><pre class="sourceCode numberSource python number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode python hljs"><span id="cb17-1" class="hljs-ln-code"><a href=""></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb17-2" class="hljs-ln-code"><a href=""></a><span class="kw">def</span> track_calls(func):</span>
<span id="cb17-3" class="hljs-ln-code"><a href=""></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb17-4" class="hljs-ln-code"><a href=""></a>        <span class="cf">with</span> <span class="bu">open</span>(<span class="st">'function_log.txt'</span>, <span class="st">'a'</span>) <span class="im">as</span> f:</span>
<span id="cb17-5" class="hljs-ln-code"><a href=""></a>            timestamp <span class="op">=</span> datetime.now().strftime(<span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S'</span>)</span>
<span id="cb17-6" class="hljs-ln-code"><a href=""></a>            f.write(<span class="ss">f"[</span><span class="sc">{</span>timestamp<span class="sc">}</span><span class="ss">] Calling </span><span class="sc">{</span>func<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss"> with args: </span><span class="sc">{</span>args<span class="sc">}</span><span class="ss">, kwargs: </span><span class="sc">{</span>kwargs<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb17-7" class="hljs-ln-code"><a href=""></a>        result <span class="op">=</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb17-8" class="hljs-ln-code"><a href=""></a>        <span class="cf">return</span> result</span>
<span id="cb17-9" class="hljs-ln-code"><a href=""></a>    <span class="cf">return</span> wrapper</span>
<span id="cb17-10" class="hljs-ln-code"><a href=""></a></span>
<span id="cb17-11" class="hljs-ln-code"><a href=""></a><span class="co"># Usage</span></span>
<span id="cb17-12" class="hljs-ln-code"><a href=""></a><span class="at">@track_calls</span></span>
<span id="cb17-13" class="hljs-ln-code"><a href=""></a><span class="kw">def</span> my_function(x, y,default<span class="op">=</span><span class="st">"TRUE"</span>):</span>
<span id="cb17-14" class="hljs-ln-code"><a href=""></a>    <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb17-15" class="hljs-ln-code"><a href=""></a></span>
<span id="cb17-16" class="hljs-ln-code"><a href=""></a>my_function(<span class="dv">1</span>, <span class="dv">2</span>,default<span class="op">=</span><span class="st">"false"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="python-1" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Python</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p>Activate the wrapper</p>
</div><div class="column" style="width:70%;">
<div class="sourceCode" id="cb18" data-code-line-numbers="12"><pre class="sourceCode numberSource python number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode python hljs"><span id="cb18-1" class="hljs-ln-code"><a href=""></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb18-2" class="hljs-ln-code"><a href=""></a><span class="kw">def</span> track_calls(func):</span>
<span id="cb18-3" class="hljs-ln-code"><a href=""></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb18-4" class="hljs-ln-code"><a href=""></a>        <span class="cf">with</span> <span class="bu">open</span>(<span class="st">'function_log.txt'</span>, <span class="st">'a'</span>) <span class="im">as</span> f:</span>
<span id="cb18-5" class="hljs-ln-code"><a href=""></a>            timestamp <span class="op">=</span> datetime.now().strftime(<span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S'</span>)</span>
<span id="cb18-6" class="hljs-ln-code"><a href=""></a>            f.write(<span class="ss">f"[</span><span class="sc">{</span>timestamp<span class="sc">}</span><span class="ss">] Calling </span><span class="sc">{</span>func<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss"> with args: </span><span class="sc">{</span>args<span class="sc">}</span><span class="ss">, kwargs: </span><span class="sc">{</span>kwargs<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb18-7" class="hljs-ln-code"><a href=""></a>        result <span class="op">=</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb18-8" class="hljs-ln-code"><a href=""></a>        <span class="cf">return</span> result</span>
<span id="cb18-9" class="hljs-ln-code"><a href=""></a>    <span class="cf">return</span> wrapper</span>
<span id="cb18-10" class="hljs-ln-code"><a href=""></a></span>
<span id="cb18-11" class="hljs-ln-code"><a href=""></a><span class="co"># Usage</span></span>
<span id="cb18-12" class="hljs-ln-code"><a href=""></a><span class="at">@track_calls</span></span>
<span id="cb18-13" class="hljs-ln-code"><a href=""></a><span class="kw">def</span> my_function(x, y,default<span class="op">=</span><span class="st">"TRUE"</span>):</span>
<span id="cb18-14" class="hljs-ln-code"><a href=""></a>    <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb18-15" class="hljs-ln-code"><a href=""></a></span>
<span id="cb18-16" class="hljs-ln-code"><a href=""></a>my_function(<span class="dv">1</span>, <span class="dv">2</span>,default<span class="op">=</span><span class="st">"false"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="python-2" class="slide level2 center" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Python</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p>Ideally, capture the output</p>
</div><div class="column" style="width:70%;">
<div class="sourceCode" id="cb19" data-code-line-numbers="8"><pre class="sourceCode numberSource python number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode python hljs"><span id="cb19-1" class="hljs-ln-code"><a href=""></a><span class="co"># Usage</span></span>
<span id="cb19-2" class="hljs-ln-code"><a href=""></a><span class="at">@track_calls</span></span>
<span id="cb19-3" class="hljs-ln-code"><a href=""></a><span class="kw">def</span> my_function(x, y,default<span class="op">=</span><span class="st">"TRUE"</span>):</span>
<span id="cb19-4" class="hljs-ln-code"><a href=""></a>    <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb19-5" class="hljs-ln-code"><a href=""></a></span>
<span id="cb19-6" class="hljs-ln-code"><a href=""></a>my_function(<span class="dv">1</span>, <span class="dv">2</span>,default<span class="op">=</span><span class="st">"false"</span>)</span>
<span id="cb19-7" class="hljs-ln-code"><a href=""></a><span class="co"># Output</span></span>
<span id="cb19-8" class="hljs-ln-code"><a href=""></a><span class="co"># [2024-12-15 12:05:37] Calling my_function with args: (1, 2), kwargs: {'default': 'false'}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section></section>
<section>
<section id="creating-log-files-automatically" class="title-slide slide level1 center">
<h1>Creating log files automatically</h1>
<p>An alternative (or complement) to creating log files explicitly is to use native functionality of the software to create them. This usually is triggered when using the <strong>command line</strong> to run the software, and thus may be considered an <strong>advanced topic.</strong> The examples below are for Linux/macOS, but similar functionality exists for Windows.</p>
</section>
<section id="python-3" class="slide level2 center" data-auto-animate="true" data-transition="fade">
<h2 data-id="quarto-animate-title">Python</h2>
<p>In order to capture screen output in Python, on Unix-like system (Linux, macOS), the following can be run:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb20-1" class="hljs-ln-code"><a href=""></a><span class="ex">python</span> main.py <span class="kw">|</span> <span class="fu">tee</span> main.log</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>which will create a log file with everything that would normally appear on the console using the <code>tee</code> command.</p>
</section>
<section id="takeaways-2" class="slide level2 smaller center">
<h2>Takeaways</h2>
<ul class="task-list">
<li><label><input type="checkbox" checked="">your code runs without problem, after all the debugging.</label></li>
<li><label><input type="checkbox" checked="">your code runs without manual intervention, and with low effort</label></li>
<li><label><input type="checkbox" checked="">it actually produces all the outputs</label></li>
<li><label><input type="checkbox" checked="">your code generates a log file that you can inspect, and that you could share with others.</label></li>
<li><label><input type="checkbox">it will run on somebody else’s computer</label></li>
</ul>
</section></section>
<section>
<section id="environments" class="title-slide slide level1 center">
<h1>Environments</h1>

</section>
<section id="tldr-3" class="slide level2 center">
<h2>TL;DR</h2>
<ul>
<li>Search paths and environments are key concepts to create <strong>portable</strong>, <strong>reproducible</strong> code, by <strong>isolating</strong> each project from others.</li>
<li>Methods exist in all (statistical) programming languages</li>
<li>For more details, see <a href="https://larsvilhuber.github.io/self-checking-reproducibility/10-creating-environments.html">other guidance</a></li>
</ul>
</section>
<section id="what-software-supports-environments" class="slide level2 center">
<h2>What software supports environments?</h2>
<ul>
<li>R: <code>renv</code> package</li>
<li>Python: <code>venv</code> or <code>virtualenv</code> module</li>
<li>Julia: <code>Pkg</code> module</li>
</ul>
</section>
<section id="understanding-search-paths" class="slide level2 center">
<h2>Understanding search paths</h2>
<p>Generically, all “environments” simply modify where the specific <strong>software searches</strong> (the “search path”) for its components, and in particular any supplementary components (packages, libraries, etc.).<a href="#/footnotes" class="footnote-ref" id="fnref3" role="doc-noteref" data-footnote-href="#/fn3" onclick=""><sup>3</sup></a></p>
<aside></aside></section></section>
<section>
<section id="reproducing-and-documenting-environments-in-python" class="title-slide slide level1 center">
<h1>Reproducing and documenting environments in Python</h1>
<p>Python allows for pinpointing exact versions of packages in the <em>PyPi</em> repository. This is done by creating a <code>requirements.txt</code> file that lists all the packages that are needed to run your code. In principle, this file can be used by others to recreate the environment you used. The problem is that it might contain TOO many packages, some of which are not relevant, even if you carefully constructed the environment, because it will contain dependencies that are specific to your platform (OS or version of Python).</p>
</section>
<section id="the-issue" class="slide level2 center">
<h2>The issue</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href=""></a><span class="ex">pip</span> freeze</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will output all the packages installed in your environment. These will include the packages you explicitly installed, but also the packages that were installed as dependencies. Some of those dependencies may be specific to your operating system or environment. In some cases, they contain packages that you needed to develop the code, but that are not needed to run it.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href=""></a><span class="ex">pip</span> freeze <span class="op">&gt;</span> requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will output all the packages installed in your environment in a file called <code>requirements.txt</code>. This file can be used to recreate the environment. Obviously, because of the above issue, it will likely contain too many packages.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href=""></a><span class="ex">pip</span> install <span class="at">-r</span> requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will install all the packages listed in <code>requirements.txt</code>. If you run this on your computer, in a different environment, this will duplicate your environment, which is fine. But it probably will not work on somebody else’s Mac, or Linux, system, and may not even work on somebody else’s Windows computer.</p>
</section>
<section id="the-solution" class="slide level2 center scrollable">
<h2>The solution</h2>
<p>The solution is to create a minimal environment, and document it. This is done in two steps:</p>
<ol type="1">
<li>Identify the packages that are needed to run your code. There are packages that may help you with this, but in principle, you want to include everything you explicitly <code>import</code> in your code, and nothing else. This is the minimal environment.</li>
<li>Prune the <code>requirements.txt</code> file to only include the packages that are needed to run your code. This will be the file you provide to replicators to recreate your necessary environment, and let the package installers solve all the other dependencies.</li>
</ol>
<p>The resulting <code>requirements.txt</code> file will contain “pinned” versions of the packages you have, so it will be very precise. Possibly overly precise.</p>
</section></section>
<section>
<section id="conclusion" class="title-slide slide level1 center">
<h1>Conclusion</h1>

</section>
<section id="ai-and-llms-are-not-special" class="slide level2 center">
<h2>AI and LLMs are not special</h2>
<p>… when it comes to reproducibility</p>
</section>
<section id="but-difficulties-are-magnified" class="slide level2 center">
<h2>But difficulties are magnified</h2>
<p>… compared to the <strong>average</strong> difficulty in economics papers</p>
</section>
<section id="solutions" class="slide level2 center">
<h2>Solutions</h2>
<ul>
<li>Be <strong>reproducible</strong> from the start
<ul>
<li>Use <strong>environments</strong></li>
<li>Use <strong>logging</strong> as evidence, especially when <strong>repetitions</strong> are expensive</li>
</ul></li>
</ul>
</section>
<section id="solutions-1" class="slide level2 center">
<h2>Solutions</h2>
<ul>
<li>Consider how and where to <strong>preserve</strong>
<ul>
<li>industry repositories may be fine for <strong>sharing</strong></li>
<li>academic repositories (<strong>Zenodo</strong>, <strong>Dataverse</strong>) handle <strong>preservation</strong></li>
<li>Toolkit is still in its infancy for the preservation of large data (<span class="math inline">\(&gt;=\)</span> 200GB)</li>
</ul></li>
</ul>
</section>
<section id="solutions-2" class="slide level2 center">
<h2>Solutions</h2>
<ul>
<li><strong>Computational empathy</strong>
<ul>
<li>Remember your own difficulties in getting this to work</li>
<li>Now put yourself in others’ computer (shoes)</li>
<li>Be very clear about what is needed - you are <strong>cutting edge</strong>, others may not be!</li>
</ul></li>
</ul>
</section>
<section id="solutions-3" class="slide level2 center">
<h2>Solutions</h2>
<ul>
<li>Use existing <strong>resources</strong>
<ul>
<li><a href="https://social-science-data-editors.github.io/template_README/">Template README</a> (<a href="https://larsvilhuber.github.io/readme-presentation/">presentation</a>) as guidance</li>
</ul></li>
</ul>
</section></section>
<section id="questions" class="title-slide slide level1 center">
<h1>Questions</h1>

</section>

<section>
<section id="section" class="title-slide slide level1 center">
<h1></h1>

<img data-src="images/HAL-static.png" class="r-stretch"></section>
<section id="this-presentation" class="slide level2 center">
<h2>This presentation</h2>
<ul>
<li><a href="https://github.com/larsvilhuber/reproducibility-for-llm">Github</a></li>
<li><a href="https://larsvilhuber.github.io/reproducibility-for-llm/presentation/">Presentation</a> (<a href="presentation.pdf">PDF</a>)</li>
</ul>
<p>Content is <a href="https://creativecommons.org/licenses/by-nc/4.0/"><img data-src="images/cc-by-nc-80x15.png" alt="License: CC BY-NC 4.0"></a>.</p>
</section></section>
<section id="appendix" class="title-slide slide level1 center">
<h1>Appendix</h1>

</section>

<section>
<section id="what-did-the-ai-say" class="title-slide slide level1 center">
<h1>What did the AI say?</h1>

</section>
<section id="what-did-claude-say" class="slide level2 center">
<h2>What did Claude say?</h2>
<p>[^claude1]</p>
<pre><code>A presentation_ on the reproducibility of AI-based research should comprehensively address several critical aspects: 

1. Methodology Transparency
   - Detailed documentation of data sources, preprocessing steps, and data cleaning techniques
   - Complete description of model architecture, hyperparameters, and training procedures
   - Explicit explanation of any data augmentation or synthetic data generation methods</code></pre>
</section>
<section class="slide level2 center">

<pre><code>2. Computational Environment
   - Specification of hardware used (GPU/CPU types, memory, computational resources)
   - Exact software and library versions (Python, PyTorch, TensorFlow, etc.)
   - Containerization or environment replication strategies (Docker, Conda environments)
   - Seed values for random number generators to ensure consistent initialization
</code></pre>
</section>
<section class="slide level2 center">

<pre><code>3. Data Considerations
   - Comprehensive data provenance and licensing information
   - Thorough description of dataset characteristics
   - Potential biases or limitations in the training and validation datasets
   - Data splitting strategies and rationale
   - Approaches for handling missing or problematic data points
</code></pre>
</section>
<section class="slide level2 center">

<pre><code>4. Experimental Reproducibility
   - Detailed experimental protocols
   - Precise performance metrics and statistical analysis methods
   - Multiple experimental runs to demonstrate result consistency
   - Confidence intervals and variance measurements
   - Ablation studies showing the impact of different model components
</code></pre>
</section>
<section class="slide level2 center">

<pre><code>5. Code and Implementation
   - Full, well-documented source code
   - Usage of version control (GitHub repositories)
   - Clear instructions for environment setup and model reproduction
   - Automated testing and validation scripts
   - Open-source release of models and training scripts
</code></pre>
</section>
<section class="slide level2 center">

<pre><code>6. Ethical and Contextual Considerations
   - Potential limitations of the research
   - Ethical implications of the AI methodology
   - Contextual constraints of the research findings
   - Potential generalizability challenges</code></pre>
</section>
<section class="slide level2 center">

<pre><code>
7. Validation Strategies
   - Cross-validation techniques
   - Benchmarking against existing methods
   - Independent verification by third-party researchers
   - Comparative analysis with previous related work</code></pre>
</section>
<section class="slide level2 center">

<pre><code>
8. Reporting Challenges
   - Acknowledgment of inherent variability in AI research
   - Transparency about potential non-reproducible elements
   - Recommendations for future researchers</code></pre>
</section>
<section class="slide level2 center">

<pre><code>
By comprehensively addressing these areas, the presentation can provide a robust framework for understanding and potentially replicating AI-based research, ultimately contributing to the scientific integrity and advancement of the field.</code></pre>
</section>
<section id="what-did-openai-say" class="slide level2 smaller center">
<h2>What did OpenAI say?</h2>
<p><a href="#/footnotes" class="footnote-ref" id="fnref4" role="doc-noteref" data-footnote-href="#/fn4" onclick=""><sup>4</sup></a></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>A presentation on the reproducibility of AI-based research should address several key areas to ensu

1. **Introduction to Reproducibility**:
   - Define reproducibility in the context of AI research.
   - Explain why reproducibility is crucial for scientific integrity, validation, and progress.

2. **Challenges in Reproducibility**:
   - Discuss common challenges such as lack of access to data, proprietary algorithms, and insuffic
   - Highlight issues related to computational resources and environment dependencies.

3. **Data Accessibility**:
   - Emphasize the importance of open datasets and the challenges of data privacy and security.
   - Discuss strategies for sharing data, such as anonymization and data licensing.

4. **Algorithm and Model Transparency**:
   - Address the need for sharing model architectures, hyperparameters, and training procedures.
   - Discuss the role of open-source software and platforms in promoting transparency.

5. **Documentation and Reporting Standards**:
   - Highlight the importance of thorough documentation, including code comments, readme files, and
   - Discuss existing standards and guidelines, such as those from journals or conferences, for rep

6. **Tools and Platforms for Reproducibility**:
   - Introduce tools and platforms that facilitate reproducibility, such as version control systems
   - Discuss the role of cloud computing in providing scalable and reproducible environments.

7. **Case Studies and Examples**:
   - Present examples of successful reproducibility efforts in AI research.
   - Discuss lessons learned from reproducibility failures and how they were addressed.

8. **Community and Collaboration**:
   - Highlight the role of the research community in fostering a culture of reproducibility.
   - Discuss collaborative efforts, such as reproducibility challenges and workshops.

9. **Ethical and Legal Considerations**:
   - Address ethical concerns related to data sharing and model transparency.
   - Discuss legal implications, such as intellectual property rights and compliance with regulatio

10. **Future Directions and Recommendations**:
    - Suggest ways to improve reproducibility in AI research, such as developing better standards, 
    - Discuss the potential impact of emerging technologies and methodologies on reproducibility.

11. **Conclusion**:
    - Summarize the key points discussed.
    - Reinforce the importance of reproducibility for advancing AI research and its applications.

By covering these areas, the presentation can provide a well-rounded view of the challenges and sol</code></pre>
</div>
</div>
<aside></aside></section>
<section id="what-did-gemini-say" class="slide level2 smaller center">
<h2>What did Gemini say?</h2>
<p><a href="#/footnotes" class="footnote-ref" id="fnref5" role="doc-noteref" data-footnote-href="#/fn5" onclick=""><sup>5</sup></a></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>A presentation on the reproducibility of AI-based research should address a multifaceted issue, cov

**1. Defining Reproducibility in the Context of AI:**

* **What does reproducibility mean in AI?** Differentiate between:
    * **Replication:** Re-running the same code on the same data and getting the same results.
    * **Reproduction:** Re-implementing the method from scratch based on the paper and getting simi
    * **Robustness:** Evaluating the model's performance on different datasets or under different c
* **Why is reproducibility important?** Highlight the benefits:
    * **Scientific validity:** Ensuring the reliability and trustworthiness of research findings.
    * **Progress and innovation:** Building upon existing work and accelerating advancements.
    * **Transparency and accountability:** Allowing for scrutiny and identification of potential bi
    * **Practical applications:** Facilitating the deployment and adoption of AI models in real-wor

**2. Challenges to Reproducibility in AI:**

* **Code and Implementation:**
    * **Lack of code availability:** Papers often lack publicly available code or provide incomplet
    * **Poor code quality:** Unstructured, undocumented, or hard-to-understand code.
    * **Dependency issues:** Incompatible library versions, operating systems, or hardware.
    * **Hidden implementation details:** Crucial parameters or preprocessing steps not explicitly m
* **Data:**
    * **Data unavailability:** Datasets are often proprietary, sensitive, or difficult to access.
    * **Data preprocessing:** Inconsistent or undocumented data cleaning, transformation, or augmen
    * **Data versioning:** Lack of clarity on which version of the dataset was used.
    * **Data bias:** Datasets may contain biases that affect the model's performance and generaliza
* **Computational Environment:**
    * **Hardware differences:** Variations in CPU, GPU, and memory can impact results.
    * **Software environment:** Differences in operating systems, libraries, and drivers.
    * **Randomness:** The use of random seeds and initialization can lead to variations in results.
* **Methodological Issues:**
    * **Incomplete descriptions:** Lack of detail in the paper about the experimental setup, hyperp
    * **Cherry-picking results:** Reporting only the best results and ignoring less favorable outco
    * **Lack of statistical rigor:** Insufficient statistical analysis or inappropriate use of stat
* **Human Factors:**
    * **Time constraints:** Researchers may lack the time or resources to properly document their w
    * **Incentives:** The current academic system may not adequately reward reproducible research.
    * **Lack of awareness:** Researchers may not be fully aware of the importance of reproducibilit

**3. Solutions and Best Practices for Improving Reproducibility:**

* **Code Sharing and Version Control:**
    * **Public repositories:** Using platforms like GitHub, GitLab, or Bitbucket to share code.
    * **Version control:** Employing Git to track changes and manage different versions of the code
    * **Clear documentation:** Providing comprehensive README files and comments within the code.
* **Data Management:**
    * **Public datasets:** Utilizing publicly available datasets whenever possible.
    * **Data sharing platforms:** Using platforms like Kaggle or Zenodo to share datasets.
    * **Data provenance:** Documenting the origin, processing, and versioning of the data.
    * **Data anonymization:** Ensuring the privacy and security of sensitive data.
* **Computational Environment Management:**
    * **Containerization:** Using Docker or Singularity to create reproducible environments.
    * **Virtual environments:** Using tools like conda or venv to manage dependencies.
    * **Configuration files:** Storing all necessary parameters and settings in configuration files
* **Methodological Transparency:**
    * **Detailed descriptions:** Providing comprehensive descriptions of the experimental setup, hy
    * **Open access publications:** Publishing research in open access journals or repositories.
    * **Pre-registration:** Registering research plans before conducting experiments.
    * **Statistical rigor:** Employing appropriate statistical methods and reporting confidence int
* **Community Efforts and Tools:**
    * **Reproducibility checklists:** Using checklists to ensure that all necessary steps are taken
    * **Reproducibility badges:** Awarding badges to papers that meet certain reproducibility crite
    * **Reproducibility workshops and tutorials:** Providing training and resources to researchers.
    * **Open-source tools and libraries:** Developing and using tools that facilitate reproducible 

**4. Call to Action:**

* **Encourage researchers to adopt best practices.**
* **Promote the use of open-source tools and platforms.**
* **Advocate for changes in the academic system to incentivize reproducible research.**
* **Raise awareness about the importance of reproducibility in AI.**

**Presentation Structure Suggestions:**

* **Start with a compelling example** of a reproducibility failure in AI research.
* **Clearly define the problem** and its implications.
* **Present the challenges** in a structured and understandable way.
* **Offer practical solutions** and best practices.
* **Conclude with a call to action** and a positive outlook for the future of reproducible AI resea

**Visual Aids:**

* **Use clear and concise slides.**
* **Include diagrams and illustrations to explain complex concepts.**
* **Show examples of good and bad code documentation.**
* **Use charts and graphs to visualize data and results.**

By addressing these key areas, your presentation will provide a comprehensive overview of the chall</code></pre>
</div>
</div>
<aside></aside></section></section>
<section id="references" class="title-slide slide level1 smaller scrollable">
<h1>References</h1>

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-korinekDataCodeGenerative2023" class="csl-entry" role="listitem">
Korinek, Anton. 2023a. <span>“Data and <span>Code</span> for: <span>Generative AI</span> for <span>Economic Research</span>: <span>Use Cases</span> and <span>Implications</span> for <span>Economists</span>.”</span> <span>Inter-university Consortium for Political and Social Research (ICPSR)</span>. <a href="https://doi.org/10.3886/E194623V1">https://doi.org/10.3886/E194623V1</a>.
</div>
<div id="ref-korinekGenerativeAIEconomic2023" class="csl-entry" role="listitem">
———. 2023b. <span>“Generative <span>AI</span> for <span>Economic Research</span>: <span>Use Cases</span> and <span>Implications</span> for <span>Economists</span>.”</span> <em>Journal of Economic Literature</em> 61 (4): 1281–1317. <a href="https://doi.org/10.1257/jel.20231736">https://doi.org/10.1257/jel.20231736</a>.
</div>
<div id="ref-korinekGenerativeAIEconomic2024" class="csl-entry" role="listitem">
———. 2024. <span>“Generative <span>AI</span> for <span>Economic Research</span>: <span>LLMs Learn</span> to <span>Collaborate</span> and <span>Reason</span>.”</span> Working {{Paper}} 33198. National Bureau of Economic Research. <a href="https://doi.org/10.3386/w33198">https://doi.org/10.3386/w33198</a>.
</div>
</div>
</section>

<section id="footnotes" class="footnotes footnotes-end-of-document smaller scrollable" role="doc-endnotes"><h2>Footnotes</h2>

<ol>
<li id="fn1"><p>Source: <a href="https://www.pngall.com/warning-sign-png/download/69408">Red Warning PNG Clipart</a>, CC-BY.</p></li>
<li id="fn2"><p>Results computed on Nov 26, 2023 based on a scan of replication packages conducted by Sebastian Kranz. 2023. “Economic Articles with Data”. https://ejd.econ.mathematik.uni-ulm.de/, searching for the words <code>main</code>, <code>master</code>, <code>makefile</code>, <code>dockerfile</code>, <code>apptainer</code>, <code>singularity</code> in any of the program files in those replication packages. Code not yet integrated into this presentation.</p></li>
<li id="fn3"><p>Formally, this is true for operating systems as well, and in some cases, the operating system and the programming language interact (for instance, in Python).</p></li>
<li id="fn4"><p>OpenAI, queried on 2024-12-14, see <code>lars_query.py</code> and <code>lars-prompt1.txt</code></p></li>
<li id="fn5"><p>Gemini, queried on 2024-12-15, see <code>lars_query_gemini.py</code> and <code>lars-prompt1.txt</code></p></li>
</ol>
</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>